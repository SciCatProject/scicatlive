<!DOCTYPE html>

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
        <link rel="next" href="services/backend/">
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.37">
    
    
      
        <title>SciCatLive</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.8c3ca2c6.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#scicatlive" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  You're not viewing the latest released version.
  <a href="../.">
    <strong>Click here to go to latest release.</strong>
  </a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="SciCatLive" class="md-header__button md-logo" aria-label="SciCatLive" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SciCatLive
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              SciCatLive
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/SciCatProject/scicatlive" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="SciCatLive" class="md-nav__button md-logo" aria-label="SciCatLive" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    SciCatLive
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/SciCatProject/scicatlive" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    SciCatLive
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    SciCatLive
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#first-stable-version" class="md-nav__link">
    <span class="md-ellipsis">
      First stable version
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#steps" class="md-nav__link">
    <span class="md-ellipsis">
      Steps
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#default-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Default setup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extra-services-and-features" class="md-nav__link">
    <span class="md-ellipsis">
      Extra services and features
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Extra services and features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      Dependencies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#select-the-services" class="md-nav__link">
    <span class="md-ellipsis">
      Select the services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-compose-env-variables" class="md-nav__link">
    <span class="md-ellipsis">
      Docker compose env variables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-compose-profiles" class="md-nav__link">
    <span class="md-ellipsis">
      Docker compose profiles
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-compose-profiles-and-env-variables-configuration-options" class="md-nav__link">
    <span class="md-ellipsis">
      Docker compose profiles and env variables configuration options
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Docker compose profiles and env variables configuration options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dev-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      DEV configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tls-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      TLS configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service-specific-config" class="md-nav__link">
    <span class="md-ellipsis">
      Service-specific config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#entrypoints" class="md-nav__link">
    <span class="md-ellipsis">
      Entrypoints
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Entrypoints">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#if-the-service-does-not-support-entrypoints-yet-one-needs-to" class="md-nav__link">
    <span class="md-ellipsis">
      If the service does not support entrypoints yet, one needs to:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-a-new-service" class="md-nav__link">
    <span class="md-ellipsis">
      Add a new service
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Add a new service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic" class="md-nav__link">
    <span class="md-ellipsis">
      Basic
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#supported-os-architectures" class="md-nav__link">
    <span class="md-ellipsis">
      Supported OS architectures
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#general-use-of-scicat" class="md-nav__link">
    <span class="md-ellipsis">
      General use of SciCat
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Services
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Backend
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Backend
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="services/backend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Backend service
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_2" >
        
          
          <label class="md-nav__link" for="__nav_2_1_2" id="__nav_2_1_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Services
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_2">
            <span class="md-nav__icon md-icon"></span>
            Services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="services/backend/services/keycloak/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Keycloak (OIDC Identity provider)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="services/backend/services/ldap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LDAP (OpenLDAP)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_1_2_3" id="__nav_2_1_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    V3
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_2_3">
            <span class="md-nav__icon md-icon"></span>
            V3
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="services/backend/services/v3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Backend v3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="services/backend/services/v3/services/archivemock/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Archive Mock
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="services/backend/services/v4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Backend v4
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="services/frontend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Frontend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="services/jupyter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jupyter Notebook
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="services/mongodb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mongodb
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="services/proxy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Proxy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="services/searchapi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Searchapi
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#first-stable-version" class="md-nav__link">
    <span class="md-ellipsis">
      First stable version
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#steps" class="md-nav__link">
    <span class="md-ellipsis">
      Steps
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#default-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Default setup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extra-services-and-features" class="md-nav__link">
    <span class="md-ellipsis">
      Extra services and features
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Extra services and features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      Dependencies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#select-the-services" class="md-nav__link">
    <span class="md-ellipsis">
      Select the services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-compose-env-variables" class="md-nav__link">
    <span class="md-ellipsis">
      Docker compose env variables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-compose-profiles" class="md-nav__link">
    <span class="md-ellipsis">
      Docker compose profiles
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-compose-profiles-and-env-variables-configuration-options" class="md-nav__link">
    <span class="md-ellipsis">
      Docker compose profiles and env variables configuration options
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Docker compose profiles and env variables configuration options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dev-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      DEV configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tls-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      TLS configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#service-specific-config" class="md-nav__link">
    <span class="md-ellipsis">
      Service-specific config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#entrypoints" class="md-nav__link">
    <span class="md-ellipsis">
      Entrypoints
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Entrypoints">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#if-the-service-does-not-support-entrypoints-yet-one-needs-to" class="md-nav__link">
    <span class="md-ellipsis">
      If the service does not support entrypoints yet, one needs to:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-a-new-service" class="md-nav__link">
    <span class="md-ellipsis">
      Add a new service
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Add a new service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic" class="md-nav__link">
    <span class="md-ellipsis">
      Basic
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Basic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#supported-os-architectures" class="md-nav__link">
    <span class="md-ellipsis">
      Supported OS architectures
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#general-use-of-scicat" class="md-nav__link">
    <span class="md-ellipsis">
      General use of SciCat
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<html>
 <body>
  <h1 id="scicatlive">
   SciCatLive
   <a class="headerlink" href="#scicatlive" title="Permanent link">
    ¶
   </a>
  </h1>
  <p>
   Get set up with an instance of SciCat to explore the metadata catalog. SciCatlive provides a flexible
and easy way to learn about SciCat and its features for people who are looking to integrate SciCat into their environment. For a user guide please see
   <a href="https://scicatproject.github.io/documentation/">
    original documentation
   </a>
   .
  </p>
  <p>
   This project requires docker and docker compose. The docker version must be later than 2.29.0 to support this project.
  </p>
  <h2 id="first-stable-version">
   First stable version
   <a class="headerlink" href="#first-stable-version" title="Permanent link">
    ¶
   </a>
  </h2>
  <p>
   Release
   <code>
    v3.0
   </code>
   is the first stable and reviewed version of SciCatLive.
  </p>
  <h2 id="steps">
   Steps
   <a class="headerlink" href="#steps" title="Permanent link">
    ¶
   </a>
  </h2>
  <details>
   <summary>
    Windows specific instructions (click to expand)
   </summary>
   <p>
    <br/>
    <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/26a0.svg" title=":warning:"/>
    Running this project on Windows is not officialy supported, you should use Windows Subsystem for Linux (WSL).
   </p>
   <p>
    However, if you want to run it on Windows you have to be careful about:
- This project makes use of symbolic links, Windows and git for Windows have to be
    <a href="https://stackoverflow.com/questions/5917249/git-symbolic-links-in-windows">
     configured to handle them
    </a>
    .
- End of lines, specifically in shell scripts. If you have the git config parameter
    <code>
     auto.crlf
    </code>
    set to
    <code>
     true
    </code>
    , git will replace LF by CRLF causing shell scripts and maybe other things to fail.
- This project uses the variable
    <code>
     ${PWD}
    </code>
    to ease path resolution in bind mounts. In PowerShell/Command Prompt, the
    <code>
     PWD
    </code>
    environment variable doesn't exist so you would need to set in manually before running any
    <code>
     docker compose
    </code>
    command.
   </p>
  </details>
  <p>
   <br/>
  </p>
  <ol>
   <li>
    Clone the repository
    <div class="highlight">
     <pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/SciCatProject/scicatlive.git
</code></pre>
    </div>
   </li>
   <li>
    Run with the following command inside the directory
    <div class="highlight">
     <pre><span></span><code>docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>-d
</code></pre>
    </div>
   </li>
  </ol>
  <h2 id="default-setup">
   Default setup
   <a class="headerlink" href="#default-setup" title="Permanent link">
    ¶
   </a>
  </h2>
  <p>
   By running
   <code>
    docker compose up -d
   </code>
   these steps take place:
  </p>
  <ol>
   <li>
    a
    <a href="./services/mongodb/">
     mongodb
    </a>
    container is created with some initial data.
   </li>
   <li>
    the SciCat
    <a href="./services/backend/services/v4/">
     backend v4
    </a>
    container is created and connected to (1).
   </li>
   <li>
    the SciCat
    <a href="./services/frontend/">
     frontend
    </a>
    container is created and connected to (2).
   </li>
   <li>
    a reverse
    <a href="./services/proxy">
     proxy
    </a>
    container is created and routes traffic to (2) and (3) through localhost subdomains, in the form:
    <code>
     http://${service}.localhost
    </code>
    . The frontend is available at simply
    <code>
     http://localhost
    </code>
    .
   </li>
   <li>
    Some services have additional endpoints that can be explored in SciCatLive which would follow
    <code>
     http://${service}.localhost/${prefix}
    </code>
    . For example, the backend API can be explored through a Swagger UI at
    <code>
     http://backend.localhost/explorer
    </code>
    .  For more information on the paths used by these routes see the original documentation for these services.
   </li>
  </ol>
  <h2 id="extra-services-and-features">
   Extra services and features
   <a class="headerlink" href="#extra-services-and-features" title="Permanent link">
    ¶
   </a>
  </h2>
  <p>
   SciCat has extra features as part of its core as well as integrating with external services.
  </p>
  <p>
   SciCat features that extend the backend are:
* Jobs - this mechanism posts to a message broker, which can then trigger down stream processes. To use this a RabbitMQ server enabled.
* Elasticsearch - creates an elasticsearch service to provide full text search in the backend.
  </p>
  <p>
   Services that can be integrated with SciCat are:
* LDAP - authentication and authorization from an LDAP server
* OIDC - authentication and authorization using an OIDC provider
* SearchAPI- for better free text search in the metadata based on the PANOSC
   <a href="https://github.com/SciCatProject/panosc-search-api/">
    search-api
   </a>
   * JupyterHub - Adds an instance of JupyterHub which demonstrates ingestion and extraction of metadata using
   <a href="https://scicatproject.github.io/pyscicat/">
    pyscicat
   </a>
   .
  </p>
  <p>
   To enable extra services configure them by:
1. setting
   <a href="https://docs.docker.com/compose/environment-variables/envvars-precedence/">
    docker compose env variables
   </a>
   2. using
   <a href="https://docs.docker.com/compose/profiles/">
    docker compose profiles
   </a>
   3. modifying the
   <a href="#service-specific-config">
    service-specific config
   </a>
   4. adding
   <a href="#entrypoints">
    entrypoints
   </a>
  </p>
  <h3 id="dependencies">
   Dependencies
   <a class="headerlink" href="#dependencies" title="Permanent link">
    ¶
   </a>
  </h3>
  <p>
   Here below we show the dependencies, including the ones of the
   <a href="#extra-services-and-features">
    extra services
   </a>
   (if
   <code>
    B
   </code>
   depends on
   <code>
    A
   </code>
   , then we visualize it as
   <code>
    A --&gt; B
   </code>
   ):
  </p>
  <pre class="mermaid"><code>graph TD
   subgraph services
      subgraph backend
         backends[v3*/v4*]
      end
      mongodb --&gt; backend
      backend --&gt; frontend
      backend --&gt; searchapi
      backend --&gt; jupyter
   end

   proxy -.- services</code></pre>
  <p>
   We flag with
   <code>
    *
   </code>
   the services which have extra internal dependencies, which are not shared.
  </p>
  <h3 id="select-the-services">
   Select the services
   <a class="headerlink" href="#select-the-services" title="Permanent link">
    ¶
   </a>
  </h3>
  <p>
   The user can selectively decide the containers to spin up and the dependencies will be resolved accordingly. The available services are in the
   <a href="https://github.com/SciCatProject/scicatlive/blob/main/services">
    services
   </a>
   folder and are called consistently.
  </p>
  <p>
   For example, one could decide to only run the
   <code>
    backend
   </code>
   by running (be aware that this will not run the
   <code>
    proxy
   </code>
   , so the service will not be available at
   <code>
    backend.localhost
   </code>
   ):
  </p>
  <div class="highlight">
   <pre><span></span><code>docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>-d<span class="w"> </span>backend
</code></pre>
  </div>
  <p>
   (or a list of services, for example, with the proxy
   <code>
    docker compose up -d backend proxy
   </code>
   )
  </p>
  <p>
   This will run, from the
   <a href="#default-setup">
    previous section
   </a>
   , (1) and (2) but skip the rest.
  </p>
  <details>
   <summary>
    Accordingly (click to expand)...
   </summary>
   <div class="highlight">
    <pre><span></span><code>docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>-d<span class="w"> </span>frontend
</code></pre>
   </div>
   <p>
    Will run, from the
    <a href="#default-setup">
     previous section
    </a>
    , (1), (2) and (4) but skip (5).
   </p>
   <p>
    And
   </p>
   <div class="highlight">
    <pre><span></span><code>docker<span class="w"> </span>compose<span class="w"> </span>--profile<span class="w"> </span>search<span class="w"> </span>up<span class="w"> </span>-d<span class="w"> </span>searchapi
</code></pre>
   </div>
   <p>
    Will run, from the
    <a href="#default-setup">
     previous section
    </a>
    , (1) and (2), skip (3) and (4), and add the
    <code>
     searchapi
    </code>
    service.
   </p>
  </details>
  <p>
   Make sure to check the
   <a href="#docker-compose-profiles-and-env-variables-configuration-options">
    backend compatibility
   </a>
   when choosing services and setting
   <code>
    docker compose env vars and profiles
   </code>
   .
  </p>
  <h3 id="docker-compose-env-variables">
   Docker compose env variables
   <a class="headerlink" href="#docker-compose-env-variables" title="Permanent link">
    ¶
   </a>
  </h3>
  <p>
   They are used to modify existing services where whenever enabling the feature requires changes in multiple services. They also have the advantage, compared to docker profiles, of not needing to define a new profile when a new combination of features becomes available. To set an env variable for docker compose, either assign it in the shell or change the
   <a href="https://github.com/SciCatProject/scicatlive/blob/main/.env">
    .env
   </a>
   file. To later unset it, either unset it from the shell or assign it an empty value, either in the shell or in the
   <a href="https://github.com/SciCatProject/scicatlive/blob/main/.env">
    .env
   </a>
   file.
  </p>
  <p>
   For example, to use the Jobs functionality of SciCat change
   <code>
    JOBS_ENABLED
   </code>
   to true before running your
   <code>
    docker compose
   </code>
   command or simply export it in the shell. For all env configuration options see
   <a href="### Docker compose profiles and env variables configuration options">
    here
   </a>
  </p>
  <h3 id="docker-compose-profiles">
   Docker compose profiles
   <a class="headerlink" href="#docker-compose-profiles" title="Permanent link">
    ¶
   </a>
  </h3>
  <p>
   They are used when adding new services or grouping services together (and do not require changes in multiple services). To enable any, run
   <code>
    docker compose --profile &lt;PROFILE&gt; up -d
   </code>
   , or export the
   <code>
    COMPOSE_PROFILES
   </code>
   env variable as described
   <a href="https://docs.docker.com/compose/environment-variables/envvars-precedence/">
    here
   </a>
   . If needed, the user can specify more than one profile in the CLI by using the flag as
   <code>
    --profile &lt;PROFILE1&gt; --profile &lt;PROFILE2&gt;
   </code>
   .
  </p>
  <p>
   For example
   <code>
    docker compose --profile analysis
   </code>
   sets up a jupyter hub with some notebooks for ingesting data into SciCat, as well as the related services (backend, mongodb, proxy). For more information on profiles available in SciCat live see the following
   <a href="### Docker compose profiles and env variables configuration options">
    table
   </a>
   .
  </p>
  <h3 id="docker-compose-profiles-and-env-variables-configuration-options">
   Docker compose profiles and env variables configuration options
   <a class="headerlink" href="#docker-compose-profiles-and-env-variables-configuration-options" title="Permanent link">
    ¶
   </a>
  </h3>
  <table>
   <thead>
    <tr>
     <th>
      Type
     </th>
     <th>
      Env key
     </th>
     <th>
      Value: Service/Feature
     </th>
     <th>
      Default
     </th>
     <th>
      Backend Compatibility
     </th>
     <th>
      Description
     </th>
     <th>
      Other impacted services
     </th>
    </tr>
   </thead>
   <tbody>
    <tr>
     <td>
      profile
     </td>
     <td>
      <code>
       COMPOSE_PROFILES
      </code>
     </td>
     <td>
      <li>
       <code>
        analysis
       </code>
       : jupyter
      </li>
      <li>
       <code>
        search
       </code>
       : searchapi
      </li>
      <li>
       <code>
        '*'
       </code>
       : jupyter,searchapi
      </li>
     </td>
     <td>
      <code>
       ''
      </code>
     </td>
     <td>
      *
     </td>
     <td>
      <li>
       analysis: enables additional jupyter notebook with python SciCat SDK installed and example notebooks
      </li>
      <li>
       search: enables a SciCat interface for standardized search
      </li>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      env
     </td>
     <td>
      <code>
       BE_VERSION
      </code>
     </td>
     <td>
      <li>
       <code>
        v3
       </code>
       : backend/v3
      </li>
      <li>
       <code>
        v4
       </code>
       : backend/v4
      </li>
     </td>
     <td>
      <code>
       v4
      </code>
     </td>
     <td>
      as set
     </td>
     <td>
      Sets the BE version to use in (2) of
      <a href="#default-setup">
       default setup
      </a>
      to v3
     </td>
     <td>
      mongodb,frontend
     </td>
    </tr>
    <tr>
     <td>
      env
     </td>
     <td>
      <code>
       JOBS_ENABLED
      </code>
     </td>
     <td>
      <code>
       true
      </code>
      : rabbitmq,archivemock,jobs feature
     </td>
     <td>
      <code>
       ''
      </code>
     </td>
     <td>
      v3
     </td>
     <td>
      Creates a RabbitMQ message broker which the BE posts to and the archivemock listens to. It emulates the data long-term archive/retrieve workflow
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      env
     </td>
     <td>
      <code>
       ELASTIC_ENABLED
      </code>
     </td>
     <td>
      <code>
       true
      </code>
      : elastic,elastic feature
     </td>
     <td>
      <code>
       ''
      </code>
     </td>
     <td>
      v4
     </td>
     <td>
      Creates an elastic search service and sets the BE to use it for full-text searches
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      env
     </td>
     <td>
      <code>
       LDAP_ENABLED
      </code>
     </td>
     <td>
      <code>
       true
      </code>
      : ldap auth
     </td>
     <td>
      <code>
       ''
      </code>
     </td>
     <td>
      *
     </td>
     <td>
      Creates an LDAP service and sets the BE to use it as authentication backend
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      env
     </td>
     <td>
      <code>
       OIDC_ENABLED
      </code>
     </td>
     <td>
      <code>
       true
      </code>
      : oidc auth
     </td>
     <td>
      <code>
       ''
      </code>
     </td>
     <td>
      *
     </td>
     <td>
      Creates an OIDC identity provider and sets the BE to use it as authentication backend
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      env
     </td>
     <td>
      <code>
       DEV
      </code>
     </td>
     <td>
      <code>
       true
      </code>
      : backend,frontend,searchapi,archivemock in DEV mode
     </td>
     <td>
      <code>
       ''
      </code>
     </td>
     <td>
      *
     </td>
     <td>
      The SciCat services' environment is prepared to ease the
      <a href="#dev-configuration">
       development in a standardized environment
      </a>
     </td>
     <td>
     </td>
    </tr>
    <tr>
     <td>
      env
     </td>
     <td>
      <code>
       &lt;SERVICE&gt;_HTTPS_URL
      </code>
     </td>
     <td>
      <code>
       &lt;URL&gt;
      </code>
      : HTTPS termination
     </td>
     <td>
      <code>
       ''
      </code>
     </td>
     <td>
      *
     </td>
     <td>
      Requests the TLS certificate for the URL to LetsEncrypt through the
      <a href="#tls-configuration">
       proxy
      </a>
     </td>
     <td>
     </td>
    </tr>
   </tbody>
  </table>
  <p>
   After optionally setting any configuration option, one can still select the services to run as described
   <a href="#select-the-services">
    here
   </a>
   .
  </p>
  <h4 id="dev-configuration">
   DEV configuration
   <a class="headerlink" href="#dev-configuration" title="Permanent link">
    ¶
   </a>
  </h4>
  <details>
   <summary>
    (click to expand)
   </summary>
   <p>
    To provide a consistent environment where developers can work, the
    <code>
     DEV=true
    </code>
    option creates the SciCat services (see DEV from
    <a href="#docker-compose-env-variables">
     here
    </a>
    for the list), but instead of running them, it just creates the base environment that each service requires. For example, for the
    <code>
     backend
    </code>
    , instead of running the web server, it creates a NODE environment with
    <code>
     git
    </code>
    where one can develop and run the unit tests. This is useful as often differences in environments create collaboration problems. It should also provide an example of the configuration for running tests. Please refer to the services' README for additional information, or to the Dockerfile
    <code>
     CMD
    </code>
    of the components' GitHub repo if not specified otherwise. The
    <code>
     DEV=true
    </code>
    affects the SciCat services only.
   </p>
   <p>
    Please be patient when using DEV as each container runs unit tests as part of the init, which might take a little to finish. This is done to test the compatibility of upstream/latest with the
    <code>
     docker compose
    </code>
    (see warning). To see if any special precaution is required to run the tests, refer to the
    <code>
     entrypoints/tests.sh
    </code>
    mounted by the volumes. To disable test execution, just comment the
    <code>
     entrypoints/tests.sh
    </code>
    mount on the respective service.
   </p>
   <p>
    It is very convenient if using
    <a href="https://code.visualstudio.com/docs/devcontainers/attach-container">
     VSCode
    </a>
    , as, after the docker services are running, one can attach to it and start developing using all VSCode features, including version control and debugging.
   </p>
   <p>
    <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/26a0.svg" title=":warning:"/>
    To prevent git unpushed changes from being lost when a container is restarted, the work folder of each service, when in DEV mode, is mounted to a docker volume, with naming convention
    <code>
     ${COMPOSE_PROJECT_NAME}_&lt;service&gt;_dev
    </code>
    . Make sure, before removing docker volumes to push the relevant changes.
   </p>
   <p>
    <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/26a0.svg" title=":warning:"/>
    As the DEV containers pull from upstream/latest, there is no guarantee of their functioning outside of releases. If they fail to start, try, as a first option, to build the image from a tag (e.g.
    <a href="https://github.com/SciCatProject/scicatlive/blob/main/services/frontend/compose.dev.yaml">
     build context
    </a>
    ) using the
    <a href="https://docs.docker.com/reference/cli/docker/image/build/#git-repositories">
     TAG
    </a>
    and then git checkout to that tag (e.g. set
    <a href="https://github.com/SciCatProject/scicatlive/blob/main/services/frontend/compose.dev.yaml">
     GITHUB_REPO
    </a>
    including the branch using the same syntax and value as the build context).
   </p>
   <p>
    e.g., for the frontend:
   </p>
   <div class="highlight">
    <pre><span></span><code><span class="w"> </span>  build:
<span class="gd">-     context: https://github.com/SciCatProject/frontend.git</span>
<span class="gi">+     context: https://github.com/SciCatProject/frontend.git#v4.4.1</span>
<span class="w"> </span>  environment:
<span class="gd">-     GITHUB_REPO: https://github.com/SciCatProject/frontend.git</span>
<span class="gi">+     GITHUB_REPO: https://github.com/SciCatProject/frontend.git#v4.4.1</span>
</code></pre>
   </div>
   <p>
    If you did not remove the volume, specified a new branch, and had any uncommited changes, they will be stashed to checkout to the selected branch. You can later reapply them by
    <code>
     git stash apply
    </code>
    .
   </p>
  </details>
  <h4 id="tls-configuration">
   TLS configuration
   <a class="headerlink" href="#tls-configuration" title="Permanent link">
    ¶
   </a>
  </h4>
  <p>
   You can enable TLS termination of desired services by setting the
   <code>
    &lt;SERVICE&gt;_HTTPS_URL
   </code>
   , by setting the full URL, including
   <code>
    https://
   </code>
   . The specified HTTPS URL will get a
   <code>
    letsencrypt
   </code>
   generated certificate through the proxy setting. For more details see the
   <a href="services/proxy/">
    proxy instructions
   </a>
   . After setting some URLs, the required changes in dependent services are automatically resolved, as explained for example
   <a href="services/frontend/">
    here
   </a>
   . Whenever possible, we use either the docker internal network or the localhost subdomains.
  </p>
  <p>
   <img alt="⚠" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/26a0.svg" title=":warning:"/>
   Please make sure to set all required
   <code>
    &lt;SERVICE&gt;_HTTPS_URL
   </code>
   whenever enabling one, as mixing public URLs and
   <code>
    localhost
   </code>
   ones might be tricky. See, for example, what is described in the
   <a href="services/frontend/#enable-additional-features">
    frontend documentation
   </a>
   and the
   <a href="services/backend/#enable-additional-features">
    backend documentation
   </a>
   .
  </p>
  <h3 id="service-specific-config">
   Service-specific config
   <a class="headerlink" href="#service-specific-config" title="Permanent link">
    ¶
   </a>
  </h3>
  <p>
   It can be changed whenever needing to configure a service independently from the others.
  </p>
  <p>
   Every service folder (inside the
   <a href="https://github.com/SciCatProject/scicatlive/blob/main/services">
    services
   </a>
   parent directory) contains its configuration and some instructions, at least for the non-third-party containers.
  </p>
  <p>
   For example, to configure the
   <a href="./services/frontend/">
    frontend
   </a>
   , the user can change any file in the
   <a href="https://github.com/SciCatProject/scicatlive/blob/main/services/frontend/config">
    frontend config
   </a>
   folder, for which instructions are available in the
   <a href="services/frontend/">
    README
   </a>
   file.
  </p>
  <p>
   After any configuration change,
   <code>
    docker compose up -d
   </code>
   must be rerun, to allow loading the changes.
  </p>
  <h3 id="entrypoints">
   Entrypoints
   <a class="headerlink" href="#entrypoints" title="Permanent link">
    ¶
   </a>
  </h3>
  <p>
   Sometimes, it is useful to run init scripts (entrypoints) before the service starts. For example, for the
   <code>
    frontend
   </code>
   composability, it is useful to specify its configuration through multiple JSON files, with different scopes, which are then merged by a
   <a href="https://github.com/SciCatProject/scicatlive/blob/main/services/frontend/entrypoints/merge_json.sh">
    init script
   </a>
   . For this reason, one can define service-specific
   <code>
    entrypoints
   </code>
   (e.g.
   <a href="https://github.com/SciCatProject/scicatlive/blob/main/services/frontend/entrypoints">
    frontend ones
   </a>
   ) which can be run inside the container, before the service starts (i.e. before the docker compose
   <code>
    command
   </code>
   is executed). Whenever these entrypoints are shared between services, it is recommended to place them in an
   <code>
    entrypoints
   </code>
   folder below the outermost service (e.g.
   <a href="https://github.com/SciCatProject/scicatlive/blob/main/entrypoints">
    this one
   </a>
   ).
  </p>
  <p>
   To ease the iterative execution of multiple init scripts, one can leverage the
   <a href="https://github.com/SciCatProject/scicatlive/blob/main/entrypoints/loop_entrypoints.sh">
    loop_entrypoints
   </a>
   utility, which loops alphabetically over
   <code>
    /docker-entrypoinst/*.sh
   </code>
   and executes each. This is in use in some services (e.g. in the
   <a href="https://github.com/SciCatProject/scicatlive/blob/main/services/frontend/compose.yaml">
    frontend
   </a>
   ), so one can add additional init steps by mounting them, one by one, as volumes inside the container in the
   <code>
    /docker-entrypoints
   </code>
   folder and naming them depending on the desired order (eventually rename the existing ones as well).
  </p>
  <h4 id="if-the-service-does-not-support-entrypoints-yet-one-needs-to">
   If the service does not support entrypoints yet, one needs to:
   <a class="headerlink" href="#if-the-service-does-not-support-entrypoints-yet-one-needs-to" title="Permanent link">
    ¶
   </a>
  </h4>
  <details>
   <summary>
    (click to expand):
   </summary>
   <ol>
    <li>
     mount the
     <a href="https://github.com/SciCatProject/scicatlive/blob/main/entrypoints/loop_entrypoints.sh">
      loop_entrypoint.sh
     </a>
     as a volume inside the container
    </li>
    <li>
     mount any service-specific init script as a volume in the container in the folder
     <code>
      /docker-entrypoints/*.sh
     </code>
     , naming them sequentially, depending on the desired execution order
    </li>
    <li>
     override the
     <code>
      entrypoint
     </code>
     field in the service
    </li>
    <li>
     specify the service
     <code>
      command
     </code>
    </li>
   </ol>
   <p>
    See for example
    <a href="https://github.com/SciCatProject/scicatlive/blob/main/services/frontend/compose.yaml">
     here
    </a>
    .
   </p>
  </details>
  <h2 id="add-a-new-service">
   Add a new service
   <a class="headerlink" href="#add-a-new-service" title="Permanent link">
    ¶
   </a>
  </h2>
  <p>
   Please note that services should, in general, be defined by their responsibility, rather than by their underlying technology, and should be named so.
  </p>
  <h3 id="basic">
   Basic
   <a class="headerlink" href="#basic" title="Permanent link">
    ¶
   </a>
  </h3>
  <p>
   To add a new service (see the
   <a href="./services/jupyter/">
    jupyter service
   </a>
   for a minimal example):
  </p>
  <ol>
   <li>
    create a dedicated folder in the
    <a href="https://github.com/SciCatProject/scicatlive/blob/main/services">
     services
    </a>
    one *
   </li>
   <li>
    name it as the service
   </li>
   <li>
    create the
    <code>
     compose.yaml
    </code>
    file
   </li>
   <li>
    eventually, add a
    <code>
     README.md
    </code>
    file in the service
   </li>
   <li>
    eventually, add the platform field, as described
    <a href="#supported-os-architectures">
     here
    </a>
   </li>
   <li>
    include the reference to (3) to the global
    <a href="https://github.com/SciCatProject/scicatlive/blob/main/compose.yaml">
     compose include list
    </a>
    *
   </li>
   <li>
    eventually, update the main
    <a href="./">
     README.md
    </a>
   </li>
  </ol>
  <p>
   * if the service to add is not shared globally, but specific to one particular service or another implementation of the same component, add it to the
   <code>
    services
   </code>
   folder relative to the affected service, and in (6) add it to its inclusion list. See an example of a service relative
   <a href="https://github.com/SciCatProject/scicatlive/blob/main/services/backend/services">
    services folder here
   </a>
   and a
   <a href="https://github.com/SciCatProject/scicatlive/blob/main/services/backend/compose.yaml">
    relative inclusion list here
   </a>
   .
  </p>
  <h4 id="supported-os-architectures">
   Supported OS architectures
   <a class="headerlink" href="#supported-os-architectures" title="Permanent link">
    ¶
   </a>
  </h4>
  <p>
   Since some images are not built with multi-arch, in particular the SciCat ones, make sure to specify the platform of the service in the compose, when needed, to avoid possible issues when running
   <code>
    docker compose up
   </code>
   on different platforms, for example on MAC with arm64 architecture. See for example the
   <a href="https://github.com/SciCatProject/scicatlive/blob/main/services/searchapi/compose.yaml#L3">
    searchapi compose
   </a>
   .
  </p>
  <h3 id="advanced">
   Advanced
   <a class="headerlink" href="#advanced" title="Permanent link">
    ¶
   </a>
  </h3>
  <details>
   <summary>
    (click to expand)
   </summary>
   <p>
    To add a new service, with advanced configuration (see the
    <a href="./services/backend/">
     backend
    </a>
    for an extensive example):
   </p>
   <ol>
    <li>
     follow the steps from the
     <a href="#basic">
      basic section
     </a>
    </li>
    <li>
     eventually, include any service, in the service-specific folder which is specific to the service and not shared by other, more general services, e.g.
     <a href="https://github.com/SciCatProject/scicatlive/blob/main/services/backend/services">
      here
     </a>
     . This folder should also include different versions of the same service, e.g. v3 and v4
     <a href="https://github.com/SciCatProject/scicatlive/blob/main/services/backend/services">
      here
     </a>
    </li>
    <li>
     <p>
      eventually, if the service supports
      <a href="#docker-compose-env-variables">
       ENVs
      </a>
      , leverage the
      <a href="https://docs.docker.com/compose/multiple-compose-files/include/#include-and-overrides">
       include override
      </a>
      feature from docker compose. For this:
     </p>
     <ol>
      <li>
       create a
       <code>
        compose.base.yaml
       </code>
       file, e.g.
       <a href="https://github.com/SciCatProject/scicatlive/blob/main/services/backend/services/v4/compose.base.yaml">
        here
       </a>
       , which should contain the
       <code>
        base
       </code>
       configuration, i.e. the one where all ENVs are unset, i.e. the features are disabled
      </li>
      <li>
       create the ENV-specific (e.g.
       <code>
        ELASTIC_ENABLED
       </code>
       )
       <code>
        compose.&lt;ENV&gt;.yaml
       </code>
       file, e.g.
       <a href="https://github.com/SciCatProject/scicatlive/blob/main/services/backend/services/v4/compose.elastic.yaml">
        backend v4 compose.elastic.yaml
       </a>
       , with the additional/override config, specific to the enabled feature
      </li>
      <li>
       create a symlink from
       <a href="https://github.com/SciCatProject/scicatlive/blob/main/services/.empty.yaml">
        .empty.yaml
       </a>
       to each
       <code>
        .compose.&lt;ENV&gt;.yaml
       </code>
       , e.g.
       <a href="https://github.com/SciCatProject/scicatlive/blob/main/services/backend/services/v4/.compose.elastic.yaml">
        here
       </a>
       . This is used whenever the
       <code>
        ENV
       </code>
       is unset, as described in the next step
      </li>
      <li>
       use
       <code>
        compose.yaml
       </code>
       to merge the
       <code>
        compose*.yaml
       </code>
       files together, making sure to default to
       <code>
        .compose.&lt;ENV&gt;.yaml
       </code>
       whenever the
       <code>
        ENV
       </code>
       is not set. See an example
       <a href="https://github.com/SciCatProject/scicatlive/blob/main/services/backend/services/v4/compose.yaml">
        here
       </a>
      </li>
      <li>
       if the service is another version of an existing one, e.g. v3 and v4 versions of the
       <code>
        backend
       </code>
       service, add the selective include in the parent compose.yaml, e.g.
       <a href="https://github.com/SciCatProject/scicatlive/blob/main/services/backend/compose.yaml">
        here
       </a>
      </li>
      <li>
       eventually, modify the
       <a href="https://github.com/SciCatProject/scicatlive/blob/main/.github/workflows/compose_test.yaml">
        compose workflow
       </a>
       to add the toggle to the matrix. If the toggle depends on the changed files, remember to create the toggle configuration
       <a href="https://github.com/SciCatProject/scicatlive/blob/main/.github/changed_files.yaml">
        here
       </a>
       and create the
       <a href="https://docs.github.com/en/actions/using-jobs/using-a-matrix-for-your-jobs#excluding-matrix-configurations">
        exclude
       </a>
       rule in the workflow.
      </li>
     </ol>
    </li>
    <li>
     <p>
      eventually, add entrypoints for init logics, as described
      <a href="#if-the-service-does-not-support-entrypoints-yet-one-needs-to">
       here
      </a>
      , e.g. like
      <a href="https://github.com/SciCatProject/scicatlive/blob/main/services/backend/services/v4/compose.base.yaml">
       here
      </a>
      , including any
      <a href="#docker-compose-env-variables">
       ENVs
      </a>
      specific logic. Remember to set the environment variable in the compose.yaml file. See, for example, the frontend
      <a href="https://github.com/SciCatProject/scicatlive/blob/main/services/frontend/entrypoints/merge_json.sh">
       entrypoint
      </a>
      and
      <a href="https://github.com/SciCatProject/scicatlive/blob/main/services/frontend/compose.base.yaml">
       compose file
      </a>
      .
     </p>
    </li>
   </ol>
  </details>
  <h2 id="general-use-of-scicat">
   General use of SciCat
   <a class="headerlink" href="#general-use-of-scicat" title="Permanent link">
    ¶
   </a>
  </h2>
  <p>
   To use SciCat, please refer to the
   <a href="https://scicatproject.github.io/documentation/">
    original documentation
   </a>
   .
  </p>
 </body>
</html>













                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="assets/javascripts/bundle.d6f25eb3.min.js"></script>
      
    
  </body>
</html>